!function(){var e=document.createElement("style");e.innerHTML=".zfile-admin-down-link[data-v-9a81adac] .el-select-dropdown__item{padding-right:15px}.zfile-admin-down-link[data-v-9a81adac] .el-dialog__header{text-align:center}.zfile-admin-down-link[data-v-9a81adac] .el-dialog__body{height:80vh;overflow-y:auto}\n",document.head.appendChild(e),System.register(["./base-legacy.79a28316.js","./card-legacy.8a3303c6.js","./zh-cn-legacy.748b49a1.js","./input-legacy.5c94c986.js","./tag-legacy.b431dc88.js","./select-legacy.61c6257e.js","./scrollbar-legacy.dc572a0d.js","./popper-legacy.11dd4ac4.js","./checkbox-legacy.6d3dd60a.js","./tooltip-legacy.f5af8fcd.js","./popover-legacy.1bc93672.js","./button-legacy.de6f77a5.js","./SvgIcon-legacy.7aa53c6f.js","./table-column-legacy.a41d2135.js","./form-item-legacy.38553213.js","./switch-legacy.6fb569c7.js","./useLinkSetting-legacy.5a7f1fb0.js","./admin-storage-legacy.de61cc9c.js","./vue3-clipboard.esm-bundler-legacy.fd707006.js","./admin-setting-legacy.3cb00d91.js","./index-legacy.80d3f8d7.js","./route-block-legacy.2d113b05.js","./plugin-vue_export-helper-legacy.7bb61c33.js","./request-legacy.c314e774.js","./index-legacy.8ea32361.js","./index-legacy.fa20fae0.js","./dayjs.min-legacy.0ae65cb3.js","./index-legacy.94d9dd0e.js","./debounce-legacy.647e9b79.js","./index-legacy.167dff34.js","./_Uint8Array-legacy.07eecf66.js","./index-legacy.9384b887.js","./event-legacy.39ad8904.js","./scroll-legacy.3aa8de77.js","./validator-legacy.de23b084.js","./focus-trap-legacy.271b160b.js","./_initCloneObject-legacy.9ce1771b.js","./index-legacy.61ab75a6.js","./index-legacy.16457413.js"],(function(e){"use strict";var n,t,a,o,l,u,c,i,r,d,f,s,p,g,y,m,h,b,v,j,w,_,x,V,k,C,U,z,E,K,A,D,T,L,R,S,F,M,Y,H,I,P,q,N,O,Q,W,B,G;return{setters:[function(e){n=e.bh,t=e.r,a=e.A},function(e){o=e.E},function(e){l=e.E,u=e.a,c=e.b,i=e.c,r=e.z,d=e.f,f=e.h,s=e.i,p=e.j},function(){},function(){},function(e){g=e.E,y=e.a},function(){},function(e){m=e.E},function(e){h=e.E,b=e.a},function(){},function(){},function(){},function(e){v=e._},function(){},function(e){j=e.E,w=e.a},function(e){_=e.E},function(e){x=e.u},function(e){V=e.l},function(e){k=e.t},function(e){C=e.l},function(e){U=e.M,z=e.r,E=e.o,K=e.a,A=e.f,D=e.j,T=e.e,L=e.m,R=e.u,S=e.k,F=e.W,M=e.F,Y=e.v,H=e.b,I=e.t,P=e.L,q=e.Q,N=e.R},function(e){O=e.b},function(e){Q=e._},function(e){W=e.E},function(e){B=e.E},function(e){G=e.E},function(){},function(){},function(){},function(){},function(){},function(){},function(){},function(){},function(){},function(){},function(){},function(){},function(){}],execute:function(){var J=function(e){return q("data-v-9a81adac"),e=e(),N(),e},X={class:"zfile-admin-down-link"},Z={class:"flex justify-between"},$=J((function(){return L("h3",{class:"text-lg leading-6 font-medium text-gray-900"}," 直链日志 ",-1)})),ee={key:0,class:"flex space-x-1.5 justify-center items-center cursor-pointer"},ne=J((function(){return L("span",{class:"text-gray-400 text-sm font-bold"},"记录下载日志：",-1)})),te={class:"mt-4"},ae={class:"flex justify-between space-x-20"},oe={class:"text-gray-400"},le={class:"space-x-2"},ue={__name:"log",setup:function(e){var q=x(),N=q.data,O=q.saveData,Q=(q.saveLoading,U({shortKey:"",storageKey:null,page:1,limit:10,path:"",ip:"",userAgent:"",referer:"",date:"",dateFrom:"",dateTo:"",total:0})),J=function(e){Q.limit=e,Q.page=1,re()},ue=function(e){Q.page=e,re()},ce=function(){return Q.date instanceof Array?(Q.dateFrom=Q.date[0],Q.dateTo=Q.date[1]):(Q.dateFrom="",Q.dateTo=""),Q},ie=z(),re=function(){d(ce()).then((function(e){ie.value=e.data,Q.total=e.dataCount}))};E((function(){re(),pe(),fe()}));var de=z(),fe=function(){C().then((function(e){de.value=e.data}))},se=z(),pe=function(){V().then((function(e){se.value=e.data}))},ge=z(),ye=function(){var e=ge.value.getSelectionRows();0!==e.length?B.confirm("是否确认删除？","提示",{type:"warning"}).then((function(){var n=e.map((function(e){return e.id}));s({ids:n}).then((function(e){W.success("删除成功"),re()}))})):W.warning("请至少选择一条数据")},me=function(){B.confirm("是否确认删除当前查询条件下的 ".concat(Q.total," 条直链下载日志？(如数量不对，请先点击查询后再用该功能按条件删除)"),"提示",{type:"warning"}).then((function(){p(ce()).then((function(e){W.success("清空成功"),re()}))}))},he=function(e){k(e).then((function(){W.success("复制成功")}))},be=function(e){window.open("".concat(de.value.domain,"/s/").concat(e))};return function(e,d){var s=_,p=g,x=y,V=j,k=G,C=l,U=a,z=w,E=h,q=m,B=v,ce=u,de=b,fe=c,pe=i,ve=o;return K(),A("div",X,[D(ve,null,{default:T((function(){return[L("div",Z,[$,R(N)?(K(),A("div",ee,[ne,D(s,{onChange:R(O),"active-text":"是","inline-prompt":"","inactive-text":"否",modelValue:R(N).recordDownloadLog,"onUpdate:modelValue":d[0]||(d[0]=function(e){return R(N).recordDownloadLog=e})},null,8,["onChange","modelValue"])])):S("",!0)]),L("div",te,[D(z,{inline:"",modelValue:R(Q),"onUpdate:modelValue":d[8]||(d[8]=function(e){return F(Q)?Q.value=e:null})},{default:T((function(){return[D(V,{label:"存储源"},{default:T((function(){return[D(x,{clearable:"",teleported:!1,modelValue:R(Q).storageKey,"onUpdate:modelValue":d[1]||(d[1]=function(e){return R(Q).storageKey=e})},{default:T((function(){return[(K(!0),A(M,null,Y(R(se),(function(e){return K(),H(p,{key:e.id,label:e.name,value:e.key},{default:T((function(){return[L("div",ae,[L("span",null,I(e.name),1),L("span",oe,I(e.type.description),1)])]})),_:2},1032,["label","value"])})),128))]})),_:1},8,["modelValue"])]})),_:1}),D(V,{label:"短链 Key"},{default:T((function(){return[D(k,{modelValue:R(Q).shortKey,"onUpdate:modelValue":d[2]||(d[2]=function(e){return R(Q).shortKey=e})},null,8,["modelValue"])]})),_:1}),D(V,{label:"文件名"},{default:T((function(){return[D(k,{modelValue:R(Q).path,"onUpdate:modelValue":d[3]||(d[3]=function(e){return R(Q).path=e})},null,8,["modelValue"])]})),_:1}),D(V,{label:"请求 IP"},{default:T((function(){return[D(k,{modelValue:R(Q).ip,"onUpdate:modelValue":d[4]||(d[4]=function(e){return R(Q).ip=e})},null,8,["modelValue"])]})),_:1}),D(V,{label:"UserAgent"},{default:T((function(){return[D(k,{modelValue:R(Q).userAgent,"onUpdate:modelValue":d[5]||(d[5]=function(e){return R(Q).userAgent=e})},null,8,["modelValue"])]})),_:1}),D(V,{label:"Referer"},{default:T((function(){return[D(k,{modelValue:R(Q).referer,"onUpdate:modelValue":d[6]||(d[6]=function(e){return R(Q).referer=e})},null,8,["modelValue"])]})),_:1}),D(V,{label:"创建时间"},{default:T((function(){return[D(C,{modelValue:R(Q).date,"onUpdate:modelValue":d[7]||(d[7]=function(e){return R(Q).date=e}),type:"daterange","value-format":"YYYY-MM-DD HH:mm:ss","default-time":[new Date(2e3,1,1,0,0,0),new Date(2e3,2,1,23,59,59)],"range-separator":"至","start-placeholder":"开始时间","end-placeholder":"结束时间"},null,8,["modelValue","default-time"])]})),_:1}),D(V,null,{default:T((function(){return[D(U,{type:"primary",icon:R(n),onClick:re},{default:T((function(){return[P("查询")]})),_:1},8,["icon"])]})),_:1})]})),_:1},8,["modelValue"]),L("div",null,[D(U,{onClick:ye,icon:R(t),type:"danger"},{default:T((function(){return[P("批量删除")]})),_:1},8,["icon"]),D(U,{onClick:me,icon:R(t),type:"danger"},{default:T((function(){return[P("删除全部页")]})),_:1},8,["icon"])]),D(de,{ref_key:"linkTableRef",ref:ge,size:"large",data:R(ie)},{default:T((function(){return[D(E,{type:"selection",width:"55"}),D(E,{width:"120",label:"存储源名称"},{default:T((function(e){var n;return[D(q,{content:null===(n=e.row.storageType)||void 0===n?void 0:n.description,placement:"right"},{default:T((function(){return[L("span",null,I(e.row.storageName),1)]})),_:2},1032,["content"])]})),_:1}),D(E,{"show-tooltip-when-overflow":"",prop:"shortKey",label:"短链 key"},{default:T((function(e){return[L("div",le,[L("span",null,I(e.row.shortKey),1),D(B,{onClick:function(n){return R(he)(e.row.shortKey)},class:"inline cursor-pointer",name:"copy"},null,8,["onClick"]),D(B,{onClick:function(n){return R(be)(e.row.shortKey)},class:"inline cursor-pointer text-blue-500 text-sm",name:"target"},null,8,["onClick"])])]})),_:1}),D(E,{"show-tooltip-when-overflow":"",prop:"path",label:"路径"}),D(E,{width:"100","show-tooltip-when-overflow":"",prop:"ip",label:"请求 ip"}),D(E,{width:"180","show-tooltip-when-overflow":"",prop:"userAgent",label:"UserAgent"}),D(E,{width:"150","show-tooltip-when-overflow":"",prop:"referer",label:"Referer"}),D(E,{width:"180",prop:"createTime",label:"创建时间"}),D(E,{width:"120",label:"操作"},{default:T((function(e){return[D(ce,{title:"是否确认删除?",onConfirm:function(n){return t=e.row.id,void f(t).then((function(e){W.success("删除成功"),re()}));var t}},{reference:T((function(){return[D(U,{icon:R(t),type:"danger"},{default:T((function(){return[P("删除")]})),_:1},8,["icon"])]})),_:2},1032,["onConfirm"])]})),_:1})]})),_:1},8,["data"]),D(pe,{locale:R(r)},{default:T((function(){return[D(fe,{class:"mt-3","page-size":R(Q).limit,background:"",layout:"total, sizes, prev, pager, next, jumper",onCurrentChange:ue,onSizeChange:J,"current-page":R(Q).page,"onUpdate:currentPage":d[9]||(d[9]=function(e){return R(Q).page=e}),"default-current-page":10,"page-sizes":[10,50,100,200,1e3,99999999],total:R(Q).total},null,8,["page-size","current-page","total"])]})),_:1},8,["locale"])])]})),_:1})])}}};"function"==typeof O&&O(ue);e("default",Q(ue,[["__scopeId","data-v-9a81adac"]]))}}}))}();
