!function(){var e=document.createElement("style");e.innerHTML=".el-button[data-v-607568a2],.el-input[data-v-607568a2] input{height:35px}\n",document.head.appendChild(e),System.register(["./base-legacy.79a28316.js","./loading-legacy.fc9141ee.js","./ZFormItem-legacy.289abe9f.js","./input-number-legacy.eb0c880e.js","./input-legacy.5c94c986.js","./radio-legacy.683bd4b1.js","./popper-legacy.11dd4ac4.js","./popover-legacy.1bc93672.js","./button-legacy.de6f77a5.js","./index-legacy.80d3f8d7.js","./admin-setting-legacy.3cb00d91.js","./request-legacy.c314e774.js","./route-block-legacy.2d113b05.js","./plugin-vue_export-helper-legacy.7bb61c33.js","./index-legacy.85dd86b1.js","./BadgeCheckIcon-legacy.f73790cb.js","./index-legacy.fa20fae0.js","./directive-legacy.d7facc11.js","./index-legacy.61ab75a6.js","./event-legacy.39ad8904.js","./index-legacy.94d9dd0e.js","./focus-trap-legacy.271b160b.js","./dropdown-legacy.3fa4bae6.js"],(function(e){"use strict";var n,t,o,a,i,l,u,r,c,d,f,s,m,p,g,v,x,b,y,V,w,h,L,_,j,H,k,U,z,C,M,D,N,E;return{setters:[function(e){n=e.bc,t=e.D,o=e.bd,a=e.A},function(){},function(e){i=e.Z,l=e.a},function(e){u=e.E},function(){},function(e){r=e.E},function(){},function(){},function(){},function(e){c=e.a,d=e.b,f=e.j,s=e.as,m=e.H,p=e.r,g=e.w,v=e.u,x=e.J,b=e.e,y=e.L,V=e.m,w=e.K,h=e.t,L=e.k,_=e.Q,j=e.R},function(e){H=e.l,k=e.u},function(e){U=e.E},function(e){z=e.b},function(e){C=e._},function(e){M=e.E},function(e){D=e.r},function(e){N=e.E},function(e){E=e.v},function(){},function(){},function(){},function(){},function(){}],execute:function(){function T(e,n){return c(),d("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true"},[f("path",{"fill-rule":"evenodd",d:"M8.257 3.099c.765-1.36 2.722-1.36 3.486 0l5.58 9.92c.75 1.334-.213 2.98-1.742 2.98H4.42c-1.53 0-2.493-1.646-1.743-2.98l5.58-9.92zM11 13a1 1 0 11-2 0 1 1 0 012 0zm-1-8a1 1 0 00-1 1v3a1 1 0 002 0V6a1 1 0 00-1-1z","clip-rule":"evenodd"})])}function B(e,n){return c(),d("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true"},[f("path",{d:"M10.707 2.293a1 1 0 00-1.414 0l-7 7a1 1 0 001.414 1.414L4 10.414V17a1 1 0 001 1h2a1 1 0 001-1v-2a1 1 0 011-1h2a1 1 0 011 1v2a1 1 0 001 1h2a1 1 0 001-1v-6.586l.293.293a1 1 0 001.414-1.414l-7-7z"})])}function F(e,n){return c(),d("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true"},[f("path",{"fill-rule":"evenodd",d:"M4 3a2 2 0 00-2 2v10a2 2 0 002 2h12a2 2 0 002-2V5a2 2 0 00-2-2H4zm12 12H4l4-8 3 6 2-4 3 6z","clip-rule":"evenodd"})])}function q(e,n){return c(),d("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true"},[f("path",{"fill-rule":"evenodd",d:"M2.166 4.999A11.954 11.954 0 0010 1.944 11.954 11.954 0 0017.834 5c.11.65.166 1.32.166 2.001 0 5.225-3.34 9.67-8 11.317C5.34 16.67 2 12.225 2 7c0-.682.057-1.35.166-2.001zm11.541 3.708a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z","clip-rule":"evenodd"})])}var S=function(e){return _("data-v-607568a2"),e=e(),j(),e},I={class:"mt-2"},A=S((function(){return V("span",{class:"text-red-500 text-sm"},"设置异常，点击查看",-1)})),R={class:"text-sm"},Z={class:"mb-2"},J={class:"text-red-500"},K={class:"flex justify-end"},Q={class:"mt-2"},G=S((function(){return V("span",{class:"text-red-500 text-sm"},"设置异常，点击查看",-1)})),O={class:"text-sm"},P={class:"mb-2"},W={class:"text-red-500"},X={class:"flex justify-end"},Y={__name:"site-setting",setup:function(e){var _=m(),j=function(){var e=s(H,{formatResult:function(e){return e.data}}),n=e.data,t=e.loading,o=e.reload,a=s(k,{manual:!0,onSuccess:function(){U({message:"保存成功",type:"success"})}}),i=a.loading,l=a.run;return{data:n,dataLoading:t,reload:o,saveData:function(){l(n.value)},saveLoading:i}}(),z=j.data,C=j.dataLoading,S=j.saveData,Y=j.saveLoading,$=p({siteName:[{required:!0,message:"请输入站点名称"}],domain:[{required:!0,message:"请输入后端站点域名"}],frontDomain:[],avatar:[{type:"url",message:"请输入正确的头像地址，需以 http 或 https 开头"}]}),ee=p(),ne=function(){document.querySelector(".z-form").click(),ee.value.validate((function(e){e&&S()}))},te=p({flag:!1,except:"",action:function(){}}),oe=p({flag:!1,except:"",action:function(){}});return g((function(){return C.value}),(function(e,n){if(!0===n){var t=_.zfileConfig.baseUrl||window.location.origin,o=z.value.domain;t!==o&&(te.value.flag=!0,te.value.current=o,te.value.except=t,te.value.action=function(){z.value.domain=t,ne(),te.value.flag=!1});var a=z.value.frontDomain,i=window.location.origin;""!==_.zfileConfig.baseUrl&&a!==i?(oe.value.flag=!0,oe.value.current=a,oe.value.except=i,oe.value.action=function(){z.value.frontDomain=i,ne(),oe.value.flag=!1}):""===_.zfileConfig.baseUrl&&a&&(oe.value.flag=!0,oe.value.current=a,oe.value.except="空",oe.value.action=function(){z.value.frontDomain="",ne(),oe.value.flag=!1})}})),function(e,s){var m=N,p=i,g=a,_=M,j=r,H=u,k=l,U=E;return v(z)?x((c(),d(k,{key:0,model:v(z),rules:v($),ref_key:"siteSettingForm",ref:ee},{"form-title":b((function(){return[y(" 站点信息 ")]})),"form-sub-title":b((function(){return[y(" 请填写您的站点信息 ")]})),footer:b((function(){return[f(g,{type:"primary",size:"default",icon:v(D),onClick:ne},{default:b((function(){return[y("保存设置")]})),_:1},8,["icon"])]})),default:b((function(){return[f(p,{prop:"siteName",label:"站点名称"},{default:b((function(){return[f(m,{id:"siteName","prefix-icon":v(n),modelValue:v(z).siteName,"onUpdate:modelValue":s[0]||(s[0]=function(e){return v(z).siteName=e})},null,8,["prefix-icon","modelValue"])]})),_:1}),f(p,{prop:"domain",label:"后端站点域名"},{tips:b((function(){return[y("此地址用于生成直链及本次存储下载使用，请务必保持和服务端地址一样 (需写 http(s):// 协议头)")]})),default:b((function(){return[f(m,{id:"domain","prefix-icon":v(t),modelValue:v(z).domain,"onUpdate:modelValue":s[1]||(s[1]=function(e){return v(z).domain=e})},null,8,["prefix-icon","modelValue"]),f(_,{placement:"right",width:400,trigger:"click"},{reference:b((function(){return[x(V("div",I,[A,f(v(T),{class:"inline w-5 text-red-500"})],512),[[w,v(te).flag]])]})),default:b((function(){return[V("div",R,[V("div",Z,[y("检测到设置异常，实际后端域名应为 "),V("span",J,h(v(te).except),1),y("，是否需要修复？（不修正可能会影响下载、文件夹加密和文档预览功能）")]),V("div",K,[f(g,{size:"small",type:"warning",icon:v(D),onClick:v(te).action},{default:b((function(){return[y("自动修正")]})),_:1},8,["icon","onClick"])])])]})),_:1})]})),_:1}),f(p,{prop:"frontDomain",label:"前端站点域名"},{tips:b((function(){return[y("前后端分离后，需配置此地址，会影响 401、403、404 页面的跳转 (需写 http(s):// 协议头，未前后端分离请保持为空)")]})),default:b((function(){return[f(m,{"prefix-icon":v(t),modelValue:v(z).frontDomain,"onUpdate:modelValue":s[2]||(s[2]=function(e){return v(z).frontDomain=e})},null,8,["prefix-icon","modelValue"]),f(_,{placement:"right",width:400,trigger:"click"},{reference:b((function(){return[x(V("div",Q,[G,f(v(T),{class:"inline w-5 text-red-500"})],512),[[w,v(oe).flag]])]})),default:b((function(){return[V("div",O,[V("div",P,[y("检测到设置异常，实际前端域名应为 "),V("span",W,h(v(oe).except),1),y("，是否需要修复？（不修正会影响 401、403、404 页面的跳转功能）")]),V("div",X,[f(g,{size:"small",type:"warning",icon:v(D),onClick:v(oe).action},{default:b((function(){return[y("自动修正")]})),_:1},8,["icon","onClick"])])])]})),_:1})]})),_:1}),f(p,{prop:"avatar",label:"头像地址"},{tips:b((function(){return[y("用于管理员页面右上角头像地址，推荐尺寸为 35 * 35.")]})),default:b((function(){return[f(m,{id:"avatar","prefix-icon":v(o),modelValue:v(z).avatar,"onUpdate:modelValue":s[3]||(s[3]=function(e){return v(z).avatar=e})},null,8,["prefix-icon","modelValue"])]})),_:1}),f(p,{prop:"siteHomeName",label:"根路径名称"},{tips:b((function(){return[y("用于设置首页上方面包屑根目录的默认名称.")]})),default:b((function(){return[f(m,{id:"siteHomeName","prefix-icon":v(B),modelValue:v(z).siteHomeName,"onUpdate:modelValue":s[4]||(s[4]=function(e){return v(z).siteHomeName=e})},null,8,["prefix-icon","modelValue"])]})),_:1}),f(p,{prop:"siteHomeLogo",label:"首页 Logo 图片地址"},{tips:b((function(){return[y("用于设置首页上面包屑左侧 Logo，留空为不显示，会自动居中显示，如有需要可通过自定义 css 来修改默认样式, logo 元素的 id 为 zfile-home-logo")]})),default:b((function(){return[f(m,{id:"siteHomeLogo","prefix-icon":v(F),modelValue:v(z).siteHomeLogo,"onUpdate:modelValue":s[5]||(s[5]=function(e){return v(z).siteHomeLogo=e})},null,8,["prefix-icon","modelValue"])]})),_:1}),f(p,{prop:"siteHomeLogoLink",label:"首页 Logo 打开链接"},{tips:b((function(){return[y("点击 Logo 链接后打开的地址，为空则点击不进行任何跳转")]})),default:b((function(){return[f(m,{id:"siteHomeLogoLink","prefix-icon":v(t),modelValue:v(z).siteHomeLogoLink,"onUpdate:modelValue":s[6]||(s[6]=function(e){return v(z).siteHomeLogoLink=e})},null,8,["prefix-icon","modelValue"])]})),_:1}),f(p,{prop:"siteHomeLogoTargetMode",label:"首页 Logo 链接打开方式"},{tips:b((function(){return[y("控制 Logo 链接的打开方式")]})),default:b((function(){return[f(j,{modelValue:v(z).siteHomeLogoTargetMode,"onUpdate:modelValue":s[7]||(s[7]=function(e){return v(z).siteHomeLogoTargetMode=e}),label:"_blank"},{default:b((function(){return[y("新标签打开")]})),_:1},8,["modelValue"]),f(j,{modelValue:v(z).siteHomeLogoTargetMode,"onUpdate:modelValue":s[8]||(s[8]=function(e){return v(z).siteHomeLogoTargetMode=e}),label:"_self"},{default:b((function(){return[y("当前页面打开")]})),_:1},8,["modelValue"])]})),_:1}),f(p,{label:"备案号"},{default:b((function(){return[f(m,{id:"icp","prefix-icon":v(q),modelValue:v(z).icp,"onUpdate:modelValue":s[9]||(s[9]=function(e){return v(z).icp=e})},null,8,["prefix-icon","modelValue"])]})),_:1}),f(p,{label:"最大同时上传文件数"},{default:b((function(){return[f(H,{id:"maxFileUploads",modelValue:v(z).maxFileUploads,"onUpdate:modelValue":s[10]||(s[10]=function(e){return v(z).maxFileUploads=e}),min:1,max:99},null,8,["modelValue"])]})),_:1})]})),_:1},8,["model","rules"])),[[U,v(Y)]]):L("",!0)}}};"function"==typeof z&&z(Y);e("default",C(Y,[["__scopeId","data-v-607568a2"]]))}}}))}();
