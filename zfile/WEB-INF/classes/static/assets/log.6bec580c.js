import{bh as ee,r as k,A as te}from"./base.f9e60852.js";import{E as oe}from"./card.fabbff56.js";import{E as ae,a as le,b as ne,c as re,z as se,f as ie,h as de,i as pe,j as me}from"./zh-cn.c8dc1f21.js";/* empty css              *//* empty css            */import{E as ue,a as ce}from"./select.1f41b943.js";import"./scrollbar.0cfecbae.js";import{E as _e}from"./popper.819708f8.js";import{E as fe,a as ge}from"./checkbox.f72cead4.js";import"./tooltip.f118fcb0.js";/* empty css                *//* empty css               */import{_ as he}from"./SvgIcon.74b03ee4.js";/* empty css                     */import{E as we,a as ye}from"./form-item.ba9bd8c5.js";import{E as ve}from"./switch.9f84dbfb.js";import{u as be}from"./useLinkSetting.df15fb8f.js";import{l as ke}from"./admin-storage.f9fc3949.js";import{t as Ve}from"./vue3-clipboard.esm-bundler.34366eba.js";import{l as Ce}from"./admin-setting.c62e8d8e.js";import{M as Ee,r as h,o as xe,a as w,f as V,j as e,e as n,m as s,u as a,k as Le,W as De,F as Se,v as ze,b as Re,t as y,L as v,Q as Te,R as Ue}from"./index.f20a2340.js";import{b as z}from"./route-block.9b0645f8.js";import{_ as Ke}from"./plugin-vue_export-helper.21dcd24c.js";import{E as c}from"./request.29c9df35.js";import{E as R}from"./index.e487e6de.js";import{E as Ae}from"./index.2085544e.js";import"./dayjs.min.072d009f.js";import"./index.4a39cc77.js";import"./debounce.0dcbc4e4.js";import"./index.ad110273.js";import"./_Uint8Array.9f77a197.js";import"./index.01b1d12e.js";import"./event.776e7e11.js";import"./scroll.5771f43f.js";import"./validator.02bde218.js";import"./focus-trap.7aeb3cb3.js";import"./_initCloneObject.23d94f1d.js";import"./index.5cf4e3bb.js";import"./index.b60e2a18.js";const T=_=>(Te("data-v-9a81adac"),_=_(),Ue(),_),Be={class:"zfile-admin-down-link"},Pe={class:"flex justify-between"},Fe=T(()=>s("h3",{class:"text-lg leading-6 font-medium text-gray-900"}," \u76F4\u94FE\u65E5\u5FD7 ",-1)),Ie={key:0,class:"flex space-x-1.5 justify-center items-center cursor-pointer"},je=T(()=>s("span",{class:"text-gray-400 text-sm font-bold"},"\u8BB0\u5F55\u4E0B\u8F7D\u65E5\u5FD7\uFF1A",-1)),Me={class:"mt-4"},$e={class:"flex justify-between space-x-20"},Ne={class:"text-gray-400"},qe={class:"space-x-2"},U={__name:"log",setup(_){const{data:b,saveData:K,saveLoading:Ye}=be(),t=Ee({shortKey:"",storageKey:null,page:1,limit:10,path:"",ip:"",userAgent:"",referer:"",date:"",dateFrom:"",dateTo:"",total:0}),A=r=>{t.limit=r,t.page=1,p()},B=r=>{t.page=r,p()},C=()=>(t.date instanceof Array?(t.dateFrom=t.date[0],t.dateTo=t.date[1]):(t.dateFrom="",t.dateTo=""),t),E=h(),p=()=>{ie(C()).then(r=>{E.value=r.data,t.total=r.dataCount})};xe(()=>{p(),F(),P()});const x=h(),P=()=>{Ce().then(r=>{x.value=r.data})},L=h(),F=()=>{ke().then(r=>{L.value=r.data})},I=r=>{de(r).then(l=>{c.success("\u5220\u9664\u6210\u529F"),p()})},D=h(),j=()=>{let r=D.value.getSelectionRows();if(r.length===0){c.warning("\u8BF7\u81F3\u5C11\u9009\u62E9\u4E00\u6761\u6570\u636E");return}R.confirm("\u662F\u5426\u786E\u8BA4\u5220\u9664\uFF1F","\u63D0\u793A",{type:"warning"}).then(()=>{let l=r.map(f=>f.id);pe({ids:l}).then(f=>{c.success("\u5220\u9664\u6210\u529F"),p()})})},M=()=>{R.confirm(`\u662F\u5426\u786E\u8BA4\u5220\u9664\u5F53\u524D\u67E5\u8BE2\u6761\u4EF6\u4E0B\u7684 ${t.total} \u6761\u76F4\u94FE\u4E0B\u8F7D\u65E5\u5FD7\uFF1F(\u5982\u6570\u91CF\u4E0D\u5BF9\uFF0C\u8BF7\u5148\u70B9\u51FB\u67E5\u8BE2\u540E\u518D\u7528\u8BE5\u529F\u80FD\u6309\u6761\u4EF6\u5220\u9664)`,"\u63D0\u793A",{type:"warning"}).then(()=>{me(C()).then(r=>{c.success("\u6E05\u7A7A\u6210\u529F"),p()})})};let $=r=>{Ve(r).then(()=>{c.success("\u590D\u5236\u6210\u529F")})},N=r=>{window.open(`${x.value.domain}/s/${r}`)};return(r,l)=>{const f=ve,q=ue,Y=ce,d=we,m=Ae,Q=ae,g=te,H=ye,i=fe,O=_e,S=he,W=le,G=ge,J=ne,X=re,Z=oe;return w(),V("div",Be,[e(Z,null,{default:n(()=>[s("div",Pe,[Fe,a(b)?(w(),V("div",Ie,[je,e(f,{onChange:a(K),"active-text":"\u662F","inline-prompt":"","inactive-text":"\u5426",modelValue:a(b).recordDownloadLog,"onUpdate:modelValue":l[0]||(l[0]=o=>a(b).recordDownloadLog=o)},null,8,["onChange","modelValue"])])):Le("",!0)]),s("div",Me,[e(H,{inline:"",modelValue:a(t),"onUpdate:modelValue":l[8]||(l[8]=o=>De(t)?t.value=o:null)},{default:n(()=>[e(d,{label:"\u5B58\u50A8\u6E90"},{default:n(()=>[e(Y,{clearable:"",teleported:!1,modelValue:a(t).storageKey,"onUpdate:modelValue":l[1]||(l[1]=o=>a(t).storageKey=o)},{default:n(()=>[(w(!0),V(Se,null,ze(a(L),o=>(w(),Re(q,{key:o.id,label:o.name,value:o.key},{default:n(()=>[s("div",$e,[s("span",null,y(o.name),1),s("span",Ne,y(o.type.description),1)])]),_:2},1032,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1}),e(d,{label:"\u77ED\u94FE Key"},{default:n(()=>[e(m,{modelValue:a(t).shortKey,"onUpdate:modelValue":l[2]||(l[2]=o=>a(t).shortKey=o)},null,8,["modelValue"])]),_:1}),e(d,{label:"\u6587\u4EF6\u540D"},{default:n(()=>[e(m,{modelValue:a(t).path,"onUpdate:modelValue":l[3]||(l[3]=o=>a(t).path=o)},null,8,["modelValue"])]),_:1}),e(d,{label:"\u8BF7\u6C42 IP"},{default:n(()=>[e(m,{modelValue:a(t).ip,"onUpdate:modelValue":l[4]||(l[4]=o=>a(t).ip=o)},null,8,["modelValue"])]),_:1}),e(d,{label:"UserAgent"},{default:n(()=>[e(m,{modelValue:a(t).userAgent,"onUpdate:modelValue":l[5]||(l[5]=o=>a(t).userAgent=o)},null,8,["modelValue"])]),_:1}),e(d,{label:"Referer"},{default:n(()=>[e(m,{modelValue:a(t).referer,"onUpdate:modelValue":l[6]||(l[6]=o=>a(t).referer=o)},null,8,["modelValue"])]),_:1}),e(d,{label:"\u521B\u5EFA\u65F6\u95F4"},{default:n(()=>[e(Q,{modelValue:a(t).date,"onUpdate:modelValue":l[7]||(l[7]=o=>a(t).date=o),type:"daterange","value-format":"YYYY-MM-DD HH:mm:ss","default-time":[new Date(2e3,1,1,0,0,0),new Date(2e3,2,1,23,59,59)],"range-separator":"\u81F3","start-placeholder":"\u5F00\u59CB\u65F6\u95F4","end-placeholder":"\u7ED3\u675F\u65F6\u95F4"},null,8,["modelValue","default-time"])]),_:1}),e(d,null,{default:n(()=>[e(g,{type:"primary",icon:a(ee),onClick:p},{default:n(()=>[v("\u67E5\u8BE2")]),_:1},8,["icon"])]),_:1})]),_:1},8,["modelValue"]),s("div",null,[e(g,{onClick:j,icon:a(k),type:"danger"},{default:n(()=>[v("\u6279\u91CF\u5220\u9664")]),_:1},8,["icon"]),e(g,{onClick:M,icon:a(k),type:"danger"},{default:n(()=>[v("\u5220\u9664\u5168\u90E8\u9875")]),_:1},8,["icon"])]),e(G,{ref_key:"linkTableRef",ref:D,size:"large",data:a(E)},{default:n(()=>[e(i,{type:"selection",width:"55"}),e(i,{width:"120",label:"\u5B58\u50A8\u6E90\u540D\u79F0"},{default:n(o=>{var u;return[e(O,{content:(u=o.row.storageType)==null?void 0:u.description,placement:"right"},{default:n(()=>[s("span",null,y(o.row.storageName),1)]),_:2},1032,["content"])]}),_:1}),e(i,{"show-tooltip-when-overflow":"",prop:"shortKey",label:"\u77ED\u94FE key"},{default:n(o=>[s("div",qe,[s("span",null,y(o.row.shortKey),1),e(S,{onClick:u=>a($)(o.row.shortKey),class:"inline cursor-pointer",name:"copy"},null,8,["onClick"]),e(S,{onClick:u=>a(N)(o.row.shortKey),class:"inline cursor-pointer text-blue-500 text-sm",name:"target"},null,8,["onClick"])])]),_:1}),e(i,{"show-tooltip-when-overflow":"",prop:"path",label:"\u8DEF\u5F84"}),e(i,{width:"100","show-tooltip-when-overflow":"",prop:"ip",label:"\u8BF7\u6C42 ip"}),e(i,{width:"180","show-tooltip-when-overflow":"",prop:"userAgent",label:"UserAgent"}),e(i,{width:"150","show-tooltip-when-overflow":"",prop:"referer",label:"Referer"}),e(i,{width:"180",prop:"createTime",label:"\u521B\u5EFA\u65F6\u95F4"}),e(i,{width:"120",label:"\u64CD\u4F5C"},{default:n(o=>[e(W,{title:"\u662F\u5426\u786E\u8BA4\u5220\u9664?",onConfirm:u=>I(o.row.id)},{reference:n(()=>[e(g,{icon:a(k),type:"danger"},{default:n(()=>[v("\u5220\u9664")]),_:1},8,["icon"])]),_:2},1032,["onConfirm"])]),_:1})]),_:1},8,["data"]),e(X,{locale:a(se)},{default:n(()=>[e(J,{class:"mt-3","page-size":a(t).limit,background:"",layout:"total, sizes, prev, pager, next, jumper",onCurrentChange:B,onSizeChange:A,"current-page":a(t).page,"onUpdate:currentPage":l[9]||(l[9]=o=>a(t).page=o),"default-current-page":10,"page-sizes":[10,50,100,200,1e3,99999999],total:a(t).total},null,8,["page-size","current-page","total"])]),_:1},8,["locale"])])]),_:1})])}}};typeof z=="function"&&z(U);var Rt=Ke(U,[["__scopeId","data-v-9a81adac"]]);export{Rt as default};
