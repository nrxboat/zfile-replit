var v=(d,f,s)=>new Promise((p,a)=>{var _=l=>{try{m(s.next(l))}catch(e){a(e)}},g=l=>{try{m(s.throw(l))}catch(e){a(e)}},m=l=>l.done?p(l.value):Promise.resolve(l.value).then(_,g);m((s=s.apply(d,f)).next())});import{bc as y,b9 as V,ba as z,D as k,A as I}from"./base.f9e60852.js";import{E,a as N}from"./form-item.ba9bd8c5.js";/* empty css               *//* empty css              */import{V as U,r as x,M as S,Z as C,H as M,a as R,f as q,m as r,j as o,e as n,u as t,L as B,h as F,Q as j,R as D,ar as L}from"./index.f20a2340.js";import{_ as A}from"./zfile-basic.3448018e.js";import{i as G,a as H}from"./install.8b9d3c45.js";import{_ as Q}from"./plugin-vue_export-helper.21dcd24c.js";import{r as T}from"./BadgeCheckIcon.9b23bce0.js";import{E as h}from"./request.29c9df35.js";import{E as Z}from"./index.2085544e.js";import"./index.5cf4e3bb.js";import"./_Uint8Array.9f77a197.js";import"./_initCloneObject.23d94f1d.js";import"./event.776e7e11.js";const $=d=>(j("data-v-25559e10"),d=d(),D(),d),J={class:"h-full min-h-screen bg-gray-100 text-gray-900 flex justify-center items-center"},K={class:"h-full lg:h-auto max-w-screen-lg bg-white shadow-xl sm:rounded-xl flex flex-1"},O=$(()=>r("div",{class:"flex-1 bg-gray-50 text-center hidden lg:flex rounded-l-xl"},[r("div",{class:"m-12 xl:m-16 w-full bg-contain bg-center bg-no-repeat zfile-install-logo"})],-1)),P={class:"w-full lg:w-1/2 xl:w-1/2 mt-10 p-6 sm:p-12"},W={class:"mt-0 flex flex-col items-center"},X={class:"text-2xl mt-0 xl:text-3xl font-extrabold box animate__animated animate__fadeInDown"},Y={class:"w-full flex-1"},ee=L('<div class="my-12 relative" data-v-25559e10><div class="absolute inset-0 flex items-center" aria-hidden="true" data-v-25559e10><div class="w-full border-t text-gray-600" data-v-25559e10></div></div><div class="relative flex justify-center text-sm" data-v-25559e10><span class="px-2 bg-white text-sm leading-none text-gray-600 tracking-wide font-medium" data-v-25559e10>\u7CFB\u7EDF\u521D\u59CB\u5316</span></div></div>',1),te={__name:"index",setup(d){let f=U(),s=x(!1),p=x(),a=S({siteName:"",username:"",password:"",domain:""}),_=x({siteName:[{required:!0,message:"\u8BF7\u8F93\u5165\u7AD9\u70B9\u540D\u79F0",trigger:["change","blur"]}],username:[{required:!0,message:"\u8BF7\u8F93\u5165\u7BA1\u7406\u5458\u8D26\u53F7",trigger:["change","blur"]}],password:[{required:!0,message:"\u8BF7\u8F93\u5165\u7BA1\u7406\u5458\u5BC6\u7801",trigger:["change","blur"]}],domain:[{required:!0,message:"\u8BF7\u8F93\u5165\u6B63\u786E\u7684\u57DF\u540D\uFF0C\u9700\u4EE5 http:// \u6216 https:// \u5F00\u5934",trigger:"change"}]});const g=l=>{window.open(l)},m=()=>v(this,null,function*(){yield p.value.validate(l=>{l?(s.value=!0,H(a).then(e=>{h({message:"\u521D\u59CB\u5316\u6210\u529F",type:e.code===0?"success":"error",duration:1500,onClose(){f.push("/")}})}).finally(()=>{s.value=!1})):h.warning("\u8BF7\u6B63\u786E\u8F93\u5165\u521D\u59CB\u5316\u503C!")})});return C(()=>{const l=M();a.domain=l.zfileConfig.baseUrl||window.location.origin,G().then(e=>{e.data&&f.push("/")})}),(l,e)=>{const c=Z,u=E,b=I,w=N;return R(),q("div",J,[r("div",K,[O,r("div",P,[r("div",W,[r("h1",X,[r("img",{class:"w-16 cursor-pointer",onClick:e[0]||(e[0]=i=>g("https://github.com/zhaojun1998/zfile")),src:A})]),r("div",Y,[ee,o(w,{onSubmit:e[5]||(e[5]=F(()=>{},["prevent"])),ref_key:"installFormRef",ref:p,rules:t(_),model:t(a),class:"zfile-install-form",size:"large"},{default:n(()=>[o(u,{class:"box animate__animated animate__fadeInUp",prop:"siteName"},{default:n(()=>[o(c,{placeholder:"\u7AD9\u70B9\u540D\u79F0","prefix-icon":t(y),modelValue:t(a).siteName,"onUpdate:modelValue":e[1]||(e[1]=i=>t(a).siteName=i)},null,8,["prefix-icon","modelValue"])]),_:1}),o(u,{class:"box animate__animated animate__fadeInUp",prop:"username"},{default:n(()=>[o(c,{placeholder:"\u7BA1\u7406\u5458\u8D26\u53F7","prefix-icon":t(V),modelValue:t(a).username,"onUpdate:modelValue":e[2]||(e[2]=i=>t(a).username=i),modelModifiers:{trim:!0}},null,8,["prefix-icon","modelValue"])]),_:1}),o(u,{class:"box animate__animated animate__fadeInUp",prop:"password"},{default:n(()=>[o(c,{placeholder:"\u7BA1\u7406\u5458\u5BC6\u7801",type:"password","show-password":"","prefix-icon":t(z),modelValue:t(a).password,"onUpdate:modelValue":e[3]||(e[3]=i=>t(a).password=i),modelModifiers:{trim:!0}},null,8,["prefix-icon","modelValue"])]),_:1}),o(u,{class:"box animate__animated animate__fadeInUp",prop:"domain"},{default:n(()=>[o(c,{placeholder:"\u7AD9\u70B9\u5730\u5740/\u57DF\u540D","prefix-icon":t(k),modelValue:t(a).domain,"onUpdate:modelValue":e[4]||(e[4]=i=>t(a).domain=i),modelModifiers:{trim:!0}},null,8,["prefix-icon","modelValue"])]),_:1}),o(u,null,{default:n(()=>[o(b,{"native-type":"submit",loading:t(s),class:"w-full",type:"primary",icon:t(T),onClick:m},{default:n(()=>[B(" \u7CFB\u7EDF\u521D\u59CB\u5316 ")]),_:1},8,["loading","icon"])]),_:1})]),_:1},8,["rules","model"])])])])])])}}};var ve=Q(te,[["__scopeId","data-v-25559e10"]]);export{ve as default};
