System.register(["./base-legacy.79a28316.js","./loading-legacy.fc9141ee.js","./ZFormItem-legacy.289abe9f.js","./button-legacy.de6f77a5.js","./input-number-legacy.eb0c880e.js","./input-legacy.5c94c986.js","./radio-legacy.683bd4b1.js","./switch-legacy.6fb569c7.js","./index-legacy.80d3f8d7.js","./useLinkSetting-legacy.5a7f1fb0.js","./admin-setting-legacy.3cb00d91.js","./index-legacy.fa20fae0.js","./directive-legacy.d7facc11.js","./index-legacy.61ab75a6.js","./plugin-vue_export-helper-legacy.7bb61c33.js","./event-legacy.39ad8904.js","./index-legacy.94d9dd0e.js","./validator-legacy.de23b084.js","./request-legacy.c314e774.js"],(function(e){"use strict";var n,l,t,u,r,a,o,i,f,c,d,s,p,m,V,b,y,h,g,_,w,k,v,x;return{setters:[function(e){n=e.A},function(){},function(e){l=e.Z,t=e.a},function(){},function(e){u=e.E},function(){},function(e){r=e.E},function(e){a=e.E},function(e){o=e.r,i=e.a,f=e.f,c=e.u,d=e.J,s=e.b,p=e.e,m=e.L,V=e.m,b=e.j,y=e.t,h=e.K,g=e.E,_=e.k},function(e){w=e.u},function(e){k=e.g},function(e){v=e.E},function(e){x=e.v},function(){},function(){},function(){},function(){},function(){},function(){}],execute:function(){var L={class:"zfile-admin-down-link-body"},j={class:"text-red-400 font-bold"},P=V("span",null,'是否允许未通过 "生成直链" 功能的直链可访问 (仅表示可访问, 如未开启上方 "是否允许使用直链（路径）" 功能，则即使访问了也不允许下载.)',-1),T=V("br",null,null,-1),U=V("br",null,null,-1),z=V("span",null,"因路径直链的格式是文件路径和文件名，所以很容易被猜到并访问, 如您不想未生成直链就可直接访问，可考虑使用此功能控制.",-1),E=V("span",null,"单 IP",-1),I=V("span",null,"秒内允许下载",-1),A=V("span",null,"次",-1),R=V("span",null,"设置直链防止恶意下载，单 IP N 秒内只允许访问 M 次直链，如其中一个为 0 则不做任何限制.",-1),F=V("br",null,null,-1),D=V("br",null,null,-1),S=V("span",null,"注意：此功能对直链、短链都有效，且共享限制次数。但直链/短链跳转后的实际下载链接无法限制，因为那些链接不经过 ZFile.",-1),C=V("br",null,null,-1),Z=V("br",null,null,-1),X={class:"text-blue-400"},B={class:"dialog-footer"};e("default",{__name:"basic-setting",setup:function(e){var H=w(),N=H.data,O=H.saveData,W=H.saveLoading,q=o("");return k().then((function(e){q.value=e.data.data})),function(e,o){var w=v,k=l,H=a,J=r,K=u,M=n,G=t,Q=x;return i(),f("div",L,[c(N)?d((i(),s(G,{key:0,model:c(N),"element-loading-text":"保存中..."},{"form-title":p((function(){return[m(" 直链设置 ")]})),"form-sub-title":p((function(){return[m(" 这里可以配置直链相关设置 ")]})),footer:p((function(){return[V("span",B,[b(M,{type:"primary",onClick:c(O)},{default:p((function(){return[m("保存")]})),_:1},8,["onClick"])])]})),default:p((function(){return[b(k,{label:"直链地址前缀"},{tips:p((function(){return[m(" 直链地址前缀, 如 http(s)://ip:port/"),V("span",j,y(c(N).directLinkPrefix),1),m("/path/filename ")]})),default:p((function(){return[b(w,{modelValue:c(N).directLinkPrefix,"onUpdate:modelValue":o[0]||(o[0]=function(e){return c(N).directLinkPrefix=e})},null,8,["modelValue"])]})),_:1}),b(k,{label:"显示生成直/短链功能"},{tips:p((function(){return[m(" 仅控制是否显示直/短链生成按钮，不影响使用允许使用直/短链下载 ")]})),default:p((function(){return[b(H,{modelValue:c(N).showLinkBtn,"onUpdate:modelValue":o[1]||(o[1]=function(e){return c(N).showLinkBtn=e})},null,8,["modelValue"])]})),_:1}),b(k,{label:"记录下载日志"},{tips:p((function(){return[m(" 是否记录直链下载日志 ")]})),default:p((function(){return[b(H,{modelValue:c(N).recordDownloadLog,"onUpdate:modelValue":o[2]||(o[2]=function(e){return c(N).recordDownloadLog=e})},null,8,["modelValue"])]})),_:1}),b(k,{label:"是否允许使用短链"},{tips:p((function(){return[m(" 控制是否生成直链时显示短链路径及是否允许使用短链进行下载 ")]})),default:p((function(){return[b(H,{modelValue:c(N).showShortLink,"onUpdate:modelValue":o[3]||(o[3]=function(e){return c(N).showShortLink=e})},null,8,["modelValue"])]})),_:1}),b(k,{label:"是否允许使用直链（路径）"},{tips:p((function(){return[m(" 控制是否生成直链时显示直链路径及是否允许使用直链进行下载 ")]})),default:p((function(){return[b(H,{modelValue:c(N).showPathLink,"onUpdate:modelValue":o[4]||(o[4]=function(e){return c(N).showPathLink=e})},null,8,["modelValue"])]})),_:1}),b(k,{label:"是否允许路径直链可直接访问"},{tips:p((function(){return[P,T,U,z]})),default:p((function(){return[b(H,{modelValue:c(N).allowPathLinkAnonAccess,"onUpdate:modelValue":o[5]||(o[5]=function(e){return c(N).allowPathLinkAnonAccess=e})},null,8,["modelValue"])]})),_:1}),b(k,{label:"Referer 防盗链"},{tips:p((function(){return[m(" 防盗链支持访问文件直链或短链时校验，如用户直接访问直链跳转后的存储源原始链接，无法进行校验和拦截。 ")]})),default:p((function(){return[b(J,{modelValue:c(N).refererType,"onUpdate:modelValue":o[6]||(o[6]=function(e){return c(N).refererType=e}),label:"off"},{default:p((function(){return[m("不启用 Referer 防盗链")]})),_:1},8,["modelValue"]),b(J,{modelValue:c(N).refererType,"onUpdate:modelValue":o[7]||(o[7]=function(e){return c(N).refererType=e}),label:"white_list"},{default:p((function(){return[m("启用白名单")]})),_:1},8,["modelValue"]),b(J,{modelValue:c(N).refererType,"onUpdate:modelValue":o[8]||(o[8]=function(e){return c(N).refererType=e}),label:"black_list"},{default:p((function(){return[m("启用黑名单")]})),_:1},8,["modelValue"])]})),_:1}),d(b(k,{label:"Referer 配置"},{default:p((function(){return[b(J,{modelValue:c(N).refererAllowEmpty,"onUpdate:modelValue":o[9]||(o[9]=function(e){return c(N).refererAllowEmpty=e}),label:!0},{default:p((function(){return[m("允许 Referer 为空")]})),_:1},8,["modelValue"]),b(J,{modelValue:c(N).refererAllowEmpty,"onUpdate:modelValue":o[10]||(o[10]=function(e){return c(N).refererAllowEmpty=e}),label:!1},{default:p((function(){return[m("禁止 Referer 为空")]})),_:1},8,["modelValue"])]})),_:1},512),[[h,"no"!==c(N).refererType]]),d(b(k,{label:"白名单"},g({default:p((function(){return[b(w,{type:"textarea",rows:6,placeholder:"每行输入一个域名，如：\r\nhttp://*example.com\r\nhttps://*example.com\r\nhttps://a.*.example.com\r\n*://*.example.com",modelValue:c(N).refererValue,"onUpdate:modelValue":o[11]||(o[11]=function(e){return c(N).refererValue=e})},null,8,["modelValue"])]})),_:2},["white_list"===c(N).refererType?{name:"tips",fn:p((function(){return[m(" 每行输入一个域名，需要写协议头支持 * 通配符，如白名单 http://*zfile.vip 将只允许 http://zfile.vip、http://www.zfile.vip、http://demo.zfile.vip 等网站访问。 ")]})),key:"0"}:void 0,"black_list"===c(N).refererType?{name:"tips",fn:p((function(){return[m(" 每行输入一个域名，需要写协议头，支持 * 通配符，如黑名单 http://*zfile.vip 将禁止所有如 http://zfile.vip、http://www.zfile.vip、http://demo.zfile.vip 等网站访问。 ")]})),key:"1"}:void 0]),1536),[[h,"no"!==c(N).refererType]]),b(k,{label:"直链下载限制"},{tips:p((function(){return[R,F,D,S,C,Z,V("span",null,[m('注意：如果你使用了反向代理，而不是直接访问的 ZFile 端口, 那你需要在反向代理处设置以下请求头为用户真实 IP："X-Forwarded-For", "X-Real-IP", "Proxy-Client-IP", "WL-Proxy-Client-IP", "HTTP_CLIENT_IP", "HTTP_X_FORWARDED_FOR"，不然不论谁访问 ZFile 都只能获取到反代服务器的 IP，同服务器一般是获取到 127.0.0.1 或 localhost, 这样此功能就无法正常使用!!! (辅助信息: 系统获取到您当前 IP 为 '),V("span",X,y(c(q)),1),m(")")])]})),default:p((function(){return[E,b(K,{modelValue:c(N).linkLimitSecond,"onUpdate:modelValue":o[12]||(o[12]=function(e){return c(N).linkLimitSecond=e}),min:0,max:86400,step:1,size:"small",class:"mx-2"},null,8,["modelValue"]),I,b(K,{modelValue:c(N).linkDownloadLimit,"onUpdate:modelValue":o[13]||(o[13]=function(e){return c(N).linkDownloadLimit=e}),min:0,max:9999999,step:1,size:"small",class:"mx-2"},null,8,["modelValue"]),A]})),_:1})]})),_:1},8,["model"])),[[Q,c(W)]]):_("",!0)])}}})}}}));
