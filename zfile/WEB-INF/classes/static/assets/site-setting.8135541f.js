import{bc as T,D as k,bd as $,A as j}from"./base.f9e60852.js";/* empty css                */import{Z,a as A}from"./ZFormItem.91aded87.js";import{E as G}from"./input-number.f57e8352.js";/* empty css              */import{E as J}from"./radio.bdc7b396.js";import"./popper.819708f8.js";/* empty css                *//* empty css               */import{a as v,b as _,j as o,as as U,H as K,r as V,w as P,u as e,J as H,e as a,L as n,m,K as y,t as N,k as Q,Q as O,R as W}from"./index.f20a2340.js";import{l as X,u as Y}from"./admin-setting.c62e8d8e.js";import{E as ee}from"./request.29c9df35.js";import{b as E}from"./route-block.9b0645f8.js";import{_ as oe}from"./plugin-vue_export-helper.21dcd24c.js";import{E as te}from"./index.56f2ec97.js";import{r as z}from"./BadgeCheckIcon.9b23bce0.js";import{E as ae}from"./index.2085544e.js";import{v as le}from"./directive.eb3ba7ee.js";import"./index.5cf4e3bb.js";import"./event.776e7e11.js";import"./index.4a39cc77.js";import"./focus-trap.7aeb3cb3.js";import"./dropdown.33c5c80f.js";function M(u,p){return v(),_("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true"},[o("path",{"fill-rule":"evenodd",d:"M8.257 3.099c.765-1.36 2.722-1.36 3.486 0l5.58 9.92c.75 1.334-.213 2.98-1.742 2.98H4.42c-1.53 0-2.493-1.646-1.743-2.98l5.58-9.92zM11 13a1 1 0 11-2 0 1 1 0 012 0zm-1-8a1 1 0 00-1 1v3a1 1 0 002 0V6a1 1 0 00-1-1z","clip-rule":"evenodd"})])}function ie(u,p){return v(),_("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true"},[o("path",{d:"M10.707 2.293a1 1 0 00-1.414 0l-7 7a1 1 0 001.414 1.414L4 10.414V17a1 1 0 001 1h2a1 1 0 001-1v-2a1 1 0 011-1h2a1 1 0 011 1v2a1 1 0 001 1h2a1 1 0 001-1v-6.586l.293.293a1 1 0 001.414-1.414l-7-7z"})])}function ne(u,p){return v(),_("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true"},[o("path",{"fill-rule":"evenodd",d:"M4 3a2 2 0 00-2 2v10a2 2 0 002 2h12a2 2 0 002-2V5a2 2 0 00-2-2H4zm12 12H4l4-8 3 6 2-4 3 6z","clip-rule":"evenodd"})])}function se(u,p){return v(),_("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true"},[o("path",{"fill-rule":"evenodd",d:"M2.166 4.999A11.954 11.954 0 0010 1.944 11.954 11.954 0 0017.834 5c.11.65.166 1.32.166 2.001 0 5.225-3.34 9.67-8 11.317C5.34 16.67 2 12.225 2 7c0-.682.057-1.35.166-2.001zm11.541 3.708a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z","clip-rule":"evenodd"})])}function re(){const{data:u,loading:p,reload:t}=U(X,{formatResult:b=>b.data}),{loading:w,run:L}=U(Y,{manual:!0,onSuccess(){ee({message:"\u4FDD\u5B58\u6210\u529F",type:"success"})}});return{data:u,dataLoading:p,reload:t,saveData:()=>{L(u.value)},saveLoading:w}}const F=u=>(O("data-v-607568a2"),u=u(),W(),u),de={class:"mt-2"},me=F(()=>m("span",{class:"text-red-500 text-sm"},"\u8BBE\u7F6E\u5F02\u5E38\uFF0C\u70B9\u51FB\u67E5\u770B",-1)),ue={class:"text-sm"},pe={class:"mb-2"},fe={class:"text-red-500"},ce={class:"flex justify-end"},ge={class:"mt-2"},ve=F(()=>m("span",{class:"text-red-500 text-sm"},"\u8BBE\u7F6E\u5F02\u5E38\uFF0C\u70B9\u51FB\u67E5\u770B",-1)),_e={class:"text-sm"},xe={class:"mb-2"},Ve={class:"text-red-500"},we={class:"flex justify-end"},B={__name:"site-setting",setup(u){let p=K();const{data:t,dataLoading:w,saveData:L,saveLoading:C}=re();let b=V({siteName:[{required:!0,message:"\u8BF7\u8F93\u5165\u7AD9\u70B9\u540D\u79F0"}],domain:[{required:!0,message:"\u8BF7\u8F93\u5165\u540E\u7AEF\u7AD9\u70B9\u57DF\u540D"}],frontDomain:[],avatar:[{type:"url",message:"\u8BF7\u8F93\u5165\u6B63\u786E\u7684\u5934\u50CF\u5730\u5740\uFF0C\u9700\u4EE5 http \u6216 https \u5F00\u5934"}]});const D=V(),x=()=>{document.querySelector(".z-form").click(),D.value.validate(h=>{h&&L()})};let f=V({flag:!1,except:"",action:()=>{}}),s=V({flag:!1,except:"",action:()=>{}});return P(()=>w.value,(h,l)=>{if(l===!0){let d=p.zfileConfig.baseUrl||window.location.origin,r=t.value.domain;d!==r&&(f.value.flag=!0,f.value.current=r,f.value.except=d,f.value.action=()=>{t.value.domain=d,x(),f.value.flag=!1});let c=t.value.frontDomain,g=window.location.origin;p.zfileConfig.baseUrl!==""&&c!==g?(s.value.flag=!0,s.value.current=c,s.value.except=g,s.value.action=()=>{t.value.frontDomain=g,x(),s.value.flag=!1}):p.zfileConfig.baseUrl===""&&!!c&&(s.value.flag=!0,s.value.current=c,s.value.except="\u7A7A",s.value.action=()=>{t.value.frontDomain="",x(),s.value.flag=!1})}}),(h,l)=>{const d=ae,r=Z,c=j,g=te,S=J,I=G,R=A,q=le;return e(t)?H((v(),_(R,{key:0,model:e(t),rules:e(b),ref_key:"siteSettingForm",ref:D},{"form-title":a(()=>[n(" \u7AD9\u70B9\u4FE1\u606F ")]),"form-sub-title":a(()=>[n(" \u8BF7\u586B\u5199\u60A8\u7684\u7AD9\u70B9\u4FE1\u606F ")]),footer:a(()=>[o(c,{type:"primary",size:"default",icon:e(z),onClick:x},{default:a(()=>[n("\u4FDD\u5B58\u8BBE\u7F6E")]),_:1},8,["icon"])]),default:a(()=>[o(r,{prop:"siteName",label:"\u7AD9\u70B9\u540D\u79F0"},{default:a(()=>[o(d,{id:"siteName","prefix-icon":e(T),modelValue:e(t).siteName,"onUpdate:modelValue":l[0]||(l[0]=i=>e(t).siteName=i)},null,8,["prefix-icon","modelValue"])]),_:1}),o(r,{prop:"domain",label:"\u540E\u7AEF\u7AD9\u70B9\u57DF\u540D"},{tips:a(()=>[n("\u6B64\u5730\u5740\u7528\u4E8E\u751F\u6210\u76F4\u94FE\u53CA\u672C\u6B21\u5B58\u50A8\u4E0B\u8F7D\u4F7F\u7528\uFF0C\u8BF7\u52A1\u5FC5\u4FDD\u6301\u548C\u670D\u52A1\u7AEF\u5730\u5740\u4E00\u6837 (\u9700\u5199 http(s):// \u534F\u8BAE\u5934)")]),default:a(()=>[o(d,{id:"domain","prefix-icon":e(k),modelValue:e(t).domain,"onUpdate:modelValue":l[1]||(l[1]=i=>e(t).domain=i)},null,8,["prefix-icon","modelValue"]),o(g,{placement:"right",width:400,trigger:"click"},{reference:a(()=>[H(m("div",de,[me,o(e(M),{class:"inline w-5 text-red-500"})],512),[[y,e(f).flag]])]),default:a(()=>[m("div",ue,[m("div",pe,[n("\u68C0\u6D4B\u5230\u8BBE\u7F6E\u5F02\u5E38\uFF0C\u5B9E\u9645\u540E\u7AEF\u57DF\u540D\u5E94\u4E3A "),m("span",fe,N(e(f).except),1),n("\uFF0C\u662F\u5426\u9700\u8981\u4FEE\u590D\uFF1F\uFF08\u4E0D\u4FEE\u6B63\u53EF\u80FD\u4F1A\u5F71\u54CD\u4E0B\u8F7D\u3001\u6587\u4EF6\u5939\u52A0\u5BC6\u548C\u6587\u6863\u9884\u89C8\u529F\u80FD\uFF09")]),m("div",ce,[o(c,{size:"small",type:"warning",icon:e(z),onClick:e(f).action},{default:a(()=>[n("\u81EA\u52A8\u4FEE\u6B63")]),_:1},8,["icon","onClick"])])])]),_:1})]),_:1}),o(r,{prop:"frontDomain",label:"\u524D\u7AEF\u7AD9\u70B9\u57DF\u540D"},{tips:a(()=>[n("\u524D\u540E\u7AEF\u5206\u79BB\u540E\uFF0C\u9700\u914D\u7F6E\u6B64\u5730\u5740\uFF0C\u4F1A\u5F71\u54CD 401\u3001403\u3001404 \u9875\u9762\u7684\u8DF3\u8F6C (\u9700\u5199 http(s):// \u534F\u8BAE\u5934\uFF0C\u672A\u524D\u540E\u7AEF\u5206\u79BB\u8BF7\u4FDD\u6301\u4E3A\u7A7A)")]),default:a(()=>[o(d,{"prefix-icon":e(k),modelValue:e(t).frontDomain,"onUpdate:modelValue":l[2]||(l[2]=i=>e(t).frontDomain=i)},null,8,["prefix-icon","modelValue"]),o(g,{placement:"right",width:400,trigger:"click"},{reference:a(()=>[H(m("div",ge,[ve,o(e(M),{class:"inline w-5 text-red-500"})],512),[[y,e(s).flag]])]),default:a(()=>[m("div",_e,[m("div",xe,[n("\u68C0\u6D4B\u5230\u8BBE\u7F6E\u5F02\u5E38\uFF0C\u5B9E\u9645\u524D\u7AEF\u57DF\u540D\u5E94\u4E3A "),m("span",Ve,N(e(s).except),1),n("\uFF0C\u662F\u5426\u9700\u8981\u4FEE\u590D\uFF1F\uFF08\u4E0D\u4FEE\u6B63\u4F1A\u5F71\u54CD 401\u3001403\u3001404 \u9875\u9762\u7684\u8DF3\u8F6C\u529F\u80FD\uFF09")]),m("div",we,[o(c,{size:"small",type:"warning",icon:e(z),onClick:e(s).action},{default:a(()=>[n("\u81EA\u52A8\u4FEE\u6B63")]),_:1},8,["icon","onClick"])])])]),_:1})]),_:1}),o(r,{prop:"avatar",label:"\u5934\u50CF\u5730\u5740"},{tips:a(()=>[n("\u7528\u4E8E\u7BA1\u7406\u5458\u9875\u9762\u53F3\u4E0A\u89D2\u5934\u50CF\u5730\u5740\uFF0C\u63A8\u8350\u5C3A\u5BF8\u4E3A 35 * 35.")]),default:a(()=>[o(d,{id:"avatar","prefix-icon":e($),modelValue:e(t).avatar,"onUpdate:modelValue":l[3]||(l[3]=i=>e(t).avatar=i)},null,8,["prefix-icon","modelValue"])]),_:1}),o(r,{prop:"siteHomeName",label:"\u6839\u8DEF\u5F84\u540D\u79F0"},{tips:a(()=>[n("\u7528\u4E8E\u8BBE\u7F6E\u9996\u9875\u4E0A\u65B9\u9762\u5305\u5C51\u6839\u76EE\u5F55\u7684\u9ED8\u8BA4\u540D\u79F0.")]),default:a(()=>[o(d,{id:"siteHomeName","prefix-icon":e(ie),modelValue:e(t).siteHomeName,"onUpdate:modelValue":l[4]||(l[4]=i=>e(t).siteHomeName=i)},null,8,["prefix-icon","modelValue"])]),_:1}),o(r,{prop:"siteHomeLogo",label:"\u9996\u9875 Logo \u56FE\u7247\u5730\u5740"},{tips:a(()=>[n("\u7528\u4E8E\u8BBE\u7F6E\u9996\u9875\u4E0A\u9762\u5305\u5C51\u5DE6\u4FA7 Logo\uFF0C\u7559\u7A7A\u4E3A\u4E0D\u663E\u793A\uFF0C\u4F1A\u81EA\u52A8\u5C45\u4E2D\u663E\u793A\uFF0C\u5982\u6709\u9700\u8981\u53EF\u901A\u8FC7\u81EA\u5B9A\u4E49 css \u6765\u4FEE\u6539\u9ED8\u8BA4\u6837\u5F0F, logo \u5143\u7D20\u7684 id \u4E3A zfile-home-logo")]),default:a(()=>[o(d,{id:"siteHomeLogo","prefix-icon":e(ne),modelValue:e(t).siteHomeLogo,"onUpdate:modelValue":l[5]||(l[5]=i=>e(t).siteHomeLogo=i)},null,8,["prefix-icon","modelValue"])]),_:1}),o(r,{prop:"siteHomeLogoLink",label:"\u9996\u9875 Logo \u6253\u5F00\u94FE\u63A5"},{tips:a(()=>[n("\u70B9\u51FB Logo \u94FE\u63A5\u540E\u6253\u5F00\u7684\u5730\u5740\uFF0C\u4E3A\u7A7A\u5219\u70B9\u51FB\u4E0D\u8FDB\u884C\u4EFB\u4F55\u8DF3\u8F6C")]),default:a(()=>[o(d,{id:"siteHomeLogoLink","prefix-icon":e(k),modelValue:e(t).siteHomeLogoLink,"onUpdate:modelValue":l[6]||(l[6]=i=>e(t).siteHomeLogoLink=i)},null,8,["prefix-icon","modelValue"])]),_:1}),o(r,{prop:"siteHomeLogoTargetMode",label:"\u9996\u9875 Logo \u94FE\u63A5\u6253\u5F00\u65B9\u5F0F"},{tips:a(()=>[n("\u63A7\u5236 Logo \u94FE\u63A5\u7684\u6253\u5F00\u65B9\u5F0F")]),default:a(()=>[o(S,{modelValue:e(t).siteHomeLogoTargetMode,"onUpdate:modelValue":l[7]||(l[7]=i=>e(t).siteHomeLogoTargetMode=i),label:"_blank"},{default:a(()=>[n("\u65B0\u6807\u7B7E\u6253\u5F00")]),_:1},8,["modelValue"]),o(S,{modelValue:e(t).siteHomeLogoTargetMode,"onUpdate:modelValue":l[8]||(l[8]=i=>e(t).siteHomeLogoTargetMode=i),label:"_self"},{default:a(()=>[n("\u5F53\u524D\u9875\u9762\u6253\u5F00")]),_:1},8,["modelValue"])]),_:1}),o(r,{label:"\u5907\u6848\u53F7"},{default:a(()=>[o(d,{id:"icp","prefix-icon":e(se),modelValue:e(t).icp,"onUpdate:modelValue":l[9]||(l[9]=i=>e(t).icp=i)},null,8,["prefix-icon","modelValue"])]),_:1}),o(r,{label:"\u6700\u5927\u540C\u65F6\u4E0A\u4F20\u6587\u4EF6\u6570"},{default:a(()=>[o(I,{id:"maxFileUploads",modelValue:e(t).maxFileUploads,"onUpdate:modelValue":l[10]||(l[10]=i=>e(t).maxFileUploads=i),min:1,max:99},null,8,["modelValue"])]),_:1})]),_:1},8,["model","rules"])),[[q,e(C)]]):Q("",!0)}}};typeof E=="function"&&E(B);var Ae=oe(B,[["__scopeId","data-v-607568a2"]]);export{Ae as default};
